<!DOCTYPE html>
<html>
<head>
    <!-- Include necessary libraries -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <!-- Dropdown for parameter selection -->
    <div class="container mt-3">
        <label for="parameter-select">Select Parameter:</label>
        <select id="parameter-select" class="form-select" aria-label="Parameter select">
            <option value="temperature">Temperature</option>
            <option value="humidity">Humidity</option>
            <!-- Add more options as needed -->
        </select>
    </div>

    <!-- Slider for time selection -->
    <div class="container mt-3">
        <label for="time-slider">Select Time:</label>
        <input type="range" id="time-slider" min="0" max="23" step="1" class="form-range">
        <span id="time-value">Time: 0</span>
    </div>

    <!-- Map container -->
    <div id="map" style="height: 600px;"></div>

    <!-- Insert your data here -->

    <script>
        var map = L.map('map').setView([51.3703, 6.1724], 12);

        // Load tile layer
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19
        }).addTo(map);

        // Initial popup contents (for default parameter and time)
        var marker1 = L.marker([51.36961111111111, 6.170222222222223]).addTo(map);
        var marker2 = L.marker([51.367333333333335, 6.16375]).addTo(map);
        var marker3 = L.marker([51.35458333333334, 6.154138888888889]).addTo(map);

        // Function to update marker popups
        function updateMarkers(parameter, time) {
            // Extract values for each marker based on parameter and time
            var value1 = data1.find(d => d.time == time)[parameter] || 'No data';
            var value2 = data2.find(d => d.time == time)[parameter] || 'No data';
            var value3 = data3.find(d => d.time == time)[parameter] || 'No data';

            // Update popups with the selected parameter value
            marker1.setPopupContent(`${parameter}: ${value1}`).openPopup();
            marker2.setPopupContent(`${parameter}: ${value2}`).openPopup();
            marker3.setPopupContent(`${parameter}: ${value3}`).openPopup();
        }

        // Event listener for parameter selection
        $('#parameter-select').on('change', function() {
            var selectedParam = $(this).val();
            var selectedTime = $('#time-slider').val();
            updateMarkers(selectedParam, selectedTime);
        });

        // Event listener for time slider
        $('#time-slider').on('input', function() {
            var selectedTime = $(this).val();
            $('#time-value').text("Time: " + selectedTime);
            var selectedParam = $('#parameter-select').val();
            updateMarkers(selectedParam, selectedTime);
        });

        // Initial map load with default parameter and time
        updateMarkers('temperature', 0);
    </script>
</body>
</html>

